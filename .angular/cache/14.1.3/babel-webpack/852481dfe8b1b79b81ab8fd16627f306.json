{"ast":null,"code":"import { cloneDeep } from 'lodash-es';\nimport { items as itemsData } from 'app/mock-api/apps/file-manager/data';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@fuse/lib/mock-api/mock-api.service\";\nexport let FileManagerMockApi = /*#__PURE__*/(() => {\n  class FileManagerMockApi {\n    /**\n     * Constructor\n     */\n    constructor(_fuseMockApiService) {\n      this._fuseMockApiService = _fuseMockApiService;\n      this._items = itemsData; // Register Mock API handlers\n\n      this.registerHandlers();\n    } // -----------------------------------------------------------------------------------------------------\n    // @ Public methods\n    // -----------------------------------------------------------------------------------------------------\n\n    /**\n     * Register Mock API handlers\n     */\n\n\n    registerHandlers() {\n      // -----------------------------------------------------------------------------------------------------\n      // @ Items - GET\n      // -----------------------------------------------------------------------------------------------------\n      this._fuseMockApiService.onGet('api/apps/file-manager').reply(({\n        request\n      }) => {\n        // Clone the items\n        let items = cloneDeep(this._items); // See if the folder id exist\n\n        const folderId = request.params.get('folderId') === 'null' ? null : request.params.get('folderId'); // Filter the items by folder id. If folder id is null,\n        // that means we want to root items which have folder id\n        // of null\n\n        items = items.filter(item => item.folderId === folderId); // Separate the items by folders and files\n\n        const folders = items.filter(item => item.type === 'folder');\n        const files = items.filter(item => item.type !== 'folder'); // Sort the folders and files alphabetically by filename\n\n        folders.sort((a, b) => a.name.localeCompare(b.name));\n        files.sort((a, b) => a.name.localeCompare(b.name)); // Figure out the path and attach it to the response\n        // Prepare the empty paths array\n\n        const pathItems = cloneDeep(this._items);\n        const path = []; // Prepare the current folder\n\n        let currentFolder = null; // Get the current folder and add it as the first entry\n\n        if (folderId) {\n          currentFolder = pathItems.find(item => item.id === folderId);\n          path.push(currentFolder);\n        } // Start traversing and storing the folders as a path array\n        // until we hit null on the folder id\n\n\n        while (currentFolder?.folderId) {\n          currentFolder = pathItems.find(item => item.id === currentFolder.folderId);\n\n          if (currentFolder) {\n            path.unshift(currentFolder);\n          }\n        }\n\n        return [200, {\n          folders,\n          files,\n          path\n        }];\n      });\n    }\n\n  }\n\n  FileManagerMockApi.ɵfac = function FileManagerMockApi_Factory(t) {\n    return new (t || FileManagerMockApi)(i0.ɵɵinject(i1.FuseMockApiService));\n  };\n\n  FileManagerMockApi.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: FileManagerMockApi,\n    factory: FileManagerMockApi.ɵfac,\n    providedIn: 'root'\n  });\n  return FileManagerMockApi;\n})();","map":null,"metadata":{},"sourceType":"module"}